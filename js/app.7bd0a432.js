(function(t){function e(e){for(var r,i,c=e[0],o=e[1],u=e[2],d=0,v=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);l&&l(e);while(v.length)v.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},s=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e49":function(t,e,a){},"127c":function(t,e,a){"use strict";a("d038")},"23e1":function(t,e,a){"use strict";a("3559")},"31b5":function(t,e,a){"use strict";a("aa8c")},3559:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("2106"),s=a.n(n),i=a("5132"),c=a.n(i),o=a("ce5b"),u=a.n(o),l=(a("bf40"),a("3e0f"));r["default"].use(u.a);var d=new u.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{zhHant:l["a"]},current:"zhHant"}}),v=a("bc3a"),p=a.n(v),m=p.a.create({baseURL:"https://viaje9.com/",timeout:1e4,withCredentials:!0}),g=m,f=a("5a0c"),h=a.n(f),b={install:function(t){t.prototype.$dayjs=h.a}};r["default"].use(b);var k=new h.a,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},_=[],y={created:function(){this.$store.dispatch("ledger/openDB")}},C=y,w=(a("5c0b"),a("2877")),$=Object(w["a"])(C,x,_,!1,null,null,null),D=$.exports,j=(a("45fc"),a("96cf"),a("1da1")),L=a("8c4f"),O=(a("7db0"),a("b0c0"),a("2f62")),S=a("3f4f"),R={namespaced:!0,state:{status:"expenditure",date:h()().format("YYYY-MM-DD"),dataBase:{name:"Ledger",version:2,expenseStore:"expense",categoryStore:"category"},db:{},itemList:[],categoryList:[]},mutations:{changeStatus:function(t,e){t.status=e},changeDate:function(t,e){t.date=e}},actions:{openDB:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=function(t){var e;t.objectStoreNames.contains("expense")||(e=t.createObjectStore("expense",{keyPath:"id",autoIncrement:!0}),e.createIndex("category","category",{unique:!1}),e.createIndex("price","price",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("remark","remark",{unique:!1}),e.createIndex("status","status",{unique:!1}),e.createIndex("createTime","createTime",{unique:!1}),e.createIndex("updateTime","updateTime",{unique:!1})),t.objectStoreNames.contains("category")||(e=t.createObjectStore("category",{keyPath:"id",autoIncrement:!0}),e.createIndex("name","name",{unique:!0}),e.createIndex("status","status",{unique:!1}))},a=t.state,r=a.dataBase,n=r.name,s=r.version,e.next=5,Object(S["a"])(n,s,{upgrade:i});case 5:a.db=e.sent;case 6:case"end":return e.stop()}}),e)})))()},updateItemList:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,r=a.db,n=a.dataBase.expenseStore,e.next=4,r.getAll(n);case 4:a.itemList=e.sent;case 5:case"end":return e.stop()}}),e)})))()},updateCategoryList:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,r=a.db,n=a.dataBase.categoryStore,e.next=4,r.getAll(n);case 4:a.categoryList=e.sent;case 5:case"end":return e.stop()}}),e)})))()}}};r["default"].use(O["a"]);var P=new O["a"].Store({state:{name:null,account:null,friends:[],auth:!1},mutations:{setUser:function(t,e){var a=e.name,r=e.account,n=e.friends;t.name=a,t.account=r,t.friends=n},updateUserName:function(t,e){t.name=e},clearAuth:function(t){t.auth=!1}},actions:{getUser:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,e.next=3,g.get("/GetUser").then((function(t){var e=t.data,r=e.name,n=e.account,s=e.friends,i=e.success;i&&(a.name=r,a.account=n,a.friends=s,a.auth=!0)}));case 3:case"end":return e.stop()}}),e)})))()}},getters:{getFriendName:function(t){return function(e){var a=t.friends.find((function(t){return t.account===e}));return a?a.name:""}},userData:function(t){return!!t.account}},modules:{ledger:R}}),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{app:""}},[a("Menu",{attrs:{"click-menu":t.drawerMenu}}),a("v-app-bar",{attrs:{app:"",dark:""}},[t.$vuetify.breakpoint.mobile?a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawerMenu=!t.drawerMenu}}}):t._e(),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.searchDialog=!0}}},[a("v-icon",[t._v("mdi-account-multiple-plus")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.settingDialog=!0}}},[a("v-icon",[t._v("mdi-cog")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.logoutDialog=!0}}},[a("v-icon",[t._v("mdi-exit-run")])],1)],1),a("v-card",{attrs:{dark:"",tile:"",height:"100%"}},[a("v-simple-table",{staticClass:"scroll",attrs:{dark:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.firends,(function(e,r){return a("tr",{key:r,attrs:{link:""},on:{click:function(a){return t.$router.push("/Chat/"+e.account)}}},[a("td",[t._v(t._s(e.name))])])})),0),a("v-divider")]},proxy:!0}])})],1),a("v-row",{attrs:{justify:"center"}},[a("SearchFriend",{attrs:{dialog:t.searchDialog},on:{close:function(e){t.searchDialog=!1}}})],1),a("v-row",{attrs:{justify:"center"}},[a("UserSetting",{attrs:{dialog:t.settingDialog},on:{close:function(e){t.settingDialog=!1}}})],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.logoutDialog,callback:function(e){t.logoutDialog=e},expression:"logoutDialog"}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",{staticClass:"headline"},[t._v(" 確定要登出? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.logout}},[t._v(" 確定 ")]),a("v-btn",{attrs:{color:"red darken-1"},on:{click:function(e){t.logoutDialog=!1}}},[t._v(" 取消 ")])],1)],1)],1)],1)},B=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{touchless:"",app:"",dark:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("div",{staticClass:"pa-2 "},[a("v-btn",{attrs:{block:""},on:{click:function(e){t.logoutDialog=!0}}},[t._v(" 登出 ")])],1),a("div",{staticClass:"text-center pb-5"},[a("span",{staticClass:"white--text text-caption"},[t._v("Copyright © 2021 Viaje9 Design.")])])]},proxy:!0}]),model:{value:t.menuDialog,callback:function(e){t.menuDialog=e},expression:"menuDialog"}},[a("v-sheet",{staticClass:"pa-4",attrs:{dark:""}},[a("v-avatar",{staticClass:"mb-4",attrs:{size:"64"}},[a("img",{attrs:{src:t.avatarImg,alt:""}})]),a("div",[t._v(t._s(t.name))])],1),a("v-divider"),a("v-list",[a("v-list-item",{attrs:{link:"",to:"/"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("聊天室")])],1)],1),a("v-list-item",{attrs:{link:"",to:"/ledger"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-cash-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("帳本")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.logoutDialog,callback:function(e){t.logoutDialog=e},expression:"logoutDialog"}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",{staticClass:"headline"},[t._v(" 確定要登出? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.logout}},[t._v(" 確定 ")]),a("v-btn",{attrs:{color:"red darken-1"},on:{click:function(e){t.logoutDialog=!1}}},[t._v(" 取消 ")])],1)],1)],1)],1)},A=[],I=a("a692"),N=a.n(I),q={props:{clickMenu:{type:Boolean,default:!1}},data:function(){return{avatarImg:N.a,menuDialog:!0,logoutDialog:!1}},computed:{name:function(){return this.$store.state.name}},watch:{clickMenu:function(){this.menuDialog=!this.menuDialog}},created:function(){this.menuDialog=!this.$vuetify.breakpoint.mobile},methods:{logout:function(){var t=this.axios,e=this.$router,a=this.$store;t.get("/Logout").then((function(t){var r=t.data;r.success&&(a.commit("clearAuth"),e.push("/Login"))}))}}},F=q,T=Object(w["a"])(F,M,A,!1,null,null,null),Y=T.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"344"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",[t._v(" 搜索好友 ")]),a("v-card-text",[a("v-text-field",{attrs:{error:t.notFind,label:"請輸入帳號",required:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),a("v-card-actions",[a("v-btn",{attrs:{loading:t.searchLoading,text:"",color:"teal accent-4"},on:{click:t.search}},[t._v(" 搜索 ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1"},on:{click:t.close}},[t._v(" 取消 ")])],1),a("v-expand-transition",[t.reveal?a("v-card",{staticClass:"transition-fast-in-fast-out v-card--reveal",staticStyle:{height:"100%"}},[a("v-divider"),a("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(t.user.name)+" ")]),a("v-card-actions",{staticClass:"pt-0 pb-3 justify-center"},[t.user.account===t.userAccount?[a("h3",{staticClass:"teal--text text--accent-4"},[t._v("長得帥也不能跟自己聊天！")])]:t.hasFriend?[a("v-btn",{attrs:{color:"teal accent-4",text:"",to:"/Chat/"+t.user.account}},[t._v(" 開始聊天 ")])]:[a("v-btn",{attrs:{loading:t.addLoading,color:"teal darken-2"},on:{click:t.addFriend}},[t._v(" 加入好友 ")])]],2)],1):t._e()],1)],1)],1)},H=[],z=(a("caad"),a("d81d"),a("d3b7"),a("2532"),{props:{dialog:{type:Boolean,default:!1}},data:function(){return{reveal:!1,account:null,user:{account:null,name:null},notFind:!1,searchLoading:!1,addLoading:!1}},computed:{userAccount:function(){return this.$store.state.account},hasFriend:function(){var t=this,e=t.$store.state.friends.map((function(t){return t.account}));return e.includes(t.user.account)}},methods:{search:function(){var t=this;t.searchLoading=!0,t.axios.get("/SearchUser",{params:{account:t.account}}).then((function(e){t.account=null,e.data.success?(t.user=e.data.user,t.notFind=!1,t.reveal=!0):(t.notFind=!0,t.reveal=!1,t.user={account:null,name:null})})).finally((function(){t.searchLoading=!1}))},addFriend:function(){var t=this;t.addLoading=!0,t.axios.post("/AddFriend",{account:t.user.account}).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.data.success){e.next=3;break}return e.next=3,t.$store.dispatch("getUser");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.addLoading=!1}))},close:function(){var t=this;t.$emit("close"),t.reveal=!1,t.user={account:null,name:null}}}}),V=z,J=Object(w["a"])(V,U,H,!1,null,null,null),W=J.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"344"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",[t._v(" 更改名稱 ")]),a("v-card-text",{staticClass:"text-center"},[a("span",{staticClass:"text-h5"},[t._v(" "+t._s(t.userName)+" ")]),a("div",{staticClass:"d-flex align-center"},[a("v-text-field",{attrs:{label:"請輸入暱稱",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-btn",{attrs:{text:"",loading:t.changeLoading,color:"teal accent-4"},on:{click:t.changeName}},[t._v(" 更改名稱 ")])],1)]),a("v-card-actions",[a("v-btn",{attrs:{block:"",color:"teal accent-4"},on:{click:function(e){return t.$emit("close")}}},[t._v(" 關閉 ")])],1)],1)],1)},G=[],K={props:{dialog:{type:Boolean,default:!1}},data:function(){return{name:null,changeLoading:!1}},computed:{userName:function(){return this.$store.state.name}},methods:{changeName:function(){var t=this;t.changeLoading=!0,t.axios.put("/UpdateUserName",{name:t.name}).then((function(e){var a=e.data;a.success&&(t.$store.commit("updateUserName",t.name),t.name=null)})).finally((function(){t.changeLoading=!1}))}}},Q=K,X=Object(w["a"])(Q,Z,G,!1,null,null,null),tt=X.exports,et={components:{Menu:Y,SearchFriend:W,UserSetting:tt},data:function(){return{avatarImg:N.a,logoutDialog:!1,searchDialog:!1,settingDialog:!1,drawerMenu:!1}},computed:{firends:function(){return this.$store.state.friends}},created:function(){this.$store.dispatch("getUser")},methods:{logout:function(){var t=this.axios,e=this.$router,a=this.$store;t.get("/Logout").then((function(t){var r=t.data;r.success&&(a.commit("clearAuth"),e.push("/Login"))}))}}},at=et,rt=(a("a3db"),Object(w["a"])(at,E,B,!1,null,"5b34aa96",null)),nt=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{app:"",id:"Ledger"}},[a("Menu",{attrs:{"click-menu":t.drawerMenu}}),a("v-app-bar",{attrs:{dark:"",flat:""}},[t.$vuetify.breakpoint.mobile?a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawerMenu=!t.drawerMenu}}}):t._e(),a("v-spacer"),a("span",{staticClass:"text-h5",on:{click:function(e){t.dialogDate=!0}}},[t._v(t._s(t.date))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",replace:"",to:"/ledger/create"}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-plus")])],1)],1),a("v-card",{attrs:{id:"LedgerCotent",dark:"",tile:"",elevation:"0"}},[a("div",{staticClass:"d-flex justify-space-around align-center"},[a("span",{staticClass:"text-h4"},[t._v("TWD")]),a("span",{staticClass:"text-h4"},[t._v(t._s(t.todayTotal))])]),a("v-divider"),a("v-simple-table",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return t.swipe("Left")},right:function(){return t.swipe("Right")}},expression:"{\n        left: () => swipe('Left'),\n        right: () => swipe('Right'),\n      }"}],staticClass:"LedgerTable",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v(" 類別 ")]),a("th",{staticClass:"text-center"},[t._v(" 金額 ")]),a("th",{staticClass:"text-center"},[t._v(" 備註 ")])])]),a("tbody",t._l(t.thisDateData,(function(e,r){return a("tr",{key:r},[a("td",{staticClass:"text-center"},[t._v(t._s(e.category))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.price))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.remark))])])})),0)]},proxy:!0}])}),a("v-card-actions",{staticClass:"pa-0"},[a("div",{attrs:{id:"LedgerBottomBar"}},[a("v-btn",{staticClass:"LedgerBtn",class:{"v-btn--active":"expenditure"===t.status},attrs:{dark:"",color:"grey darken-2",elevation:"0",tile:""},on:{click:function(e){return t.changeStatus("expenditure")}}},[t._v(" 支出 ")]),a("v-btn",{staticClass:"LedgerBtn",class:{"v-btn--active":"income"===t.status},attrs:{dark:"",color:"grey darken-2",elevation:"0",tile:""},on:{click:function(e){return t.changeStatus("income")}}},[t._v(" 收入 ")])],1)])],1),a("v-bottom-navigation",{staticClass:"justify-space-around",attrs:{absolute:"",dark:""}},[a("v-btn",{attrs:{elevation:"0"}},[a("span",[t._v("統計")]),a("v-icon",[t._v("mdi-chart-bar")])],1),a("v-btn",{attrs:{elevation:"0",replace:"",to:"/ledger/setting"}},[a("span",[t._v(" 設定 ")]),a("v-icon",[t._v("mdi-cog")])],1)],1),a("v-bottom-sheet",{attrs:{width:"384px"},model:{value:t.dialogDate,callback:function(e){t.dialogDate=e},expression:"dialogDate"}},[a("v-date-picker",{attrs:{value:t.date,dark:"","header-color":"grey darken-2",width:"100%"},on:{change:t.changeDate}}),a("v-sheet",{staticClass:"text-center pa-2",attrs:{dark:""}},[a("v-btn",{attrs:{block:""},on:{click:function(e){t.dialogDate=!1}}},[t._v(" 確定 ")])],1)],1)],1)},it=[],ct=(a("4de4"),a("13d5"),a("a9e3"),a("5530")),ot={components:{Menu:Y},data:function(){return{dialogDate:!1,drawerMenu:!1}},computed:Object(ct["a"])(Object(ct["a"])({},Object(O["b"])("ledger",{date:function(t){return t.date},status:function(t){return t.status},data:function(t){return t.itemList}})),{},{thisDateData:function(){var t=this.status,e=this.data,a=this.date,r=this.$dayjs,n=r(a).format("YYYY-MM-DD");return e.filter((function(e){var a=r(n).isSame(r(e.date));return a&&e.status===t}))},todayTotal:function(){return this.thisDateData.reduce((function(t,e){var a=t+Number(e.price);return a}),0)}}),created:function(){this.$store.dispatch("ledger/updateItemList")},methods:{changeStatus:function(t){this.$store.commit("ledger/changeStatus",t)},changeDate:function(t){this.$store.commit("ledger/changeDate",t)},swipe:function(t){var e,a=this.date,r=this.$dayjs,n=this.$store;switch(t){case"Left":e=r(a).subtract(1,"day");break;case"Right":e=r(a).add(1,"day");break;default:break}n.commit("ledger/changeDate",e.format("YYYY-MM-DD"))}}},ut=ot,lt=(a("31b5"),Object(w["a"])(ut,st,it,!1,null,null,null)),dt=lt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{app:"",id:"LedgerCreate"}},[a("v-card",{staticClass:"LedgerCreateCard",attrs:{dark:"",tile:"",height:"100%"}},[a("v-app-bar",{attrs:{dark:"",flat:""}},[a("v-btn",{attrs:{icon:"",replace:"",to:"/ledger"}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-left")])],1),a("v-spacer"),a("span",{staticClass:"text-h5"},[t._v(t._s(t.statusTitle))]),a("v-spacer"),a("v-btn",{attrs:{tile:""},on:{click:t.addItem}},[t._v(" 儲存 ")])],1),a("div",{staticClass:"d-flex justify-space-around align-center py-3",on:{click:function(e){t.openComputer=!0}}},[a("span",{staticClass:"text-h4"},[t._v("TWD")]),a("span",{staticClass:"text-h4"},[t._v("$"+t._s(t.price))])]),a("v-divider"),a("v-btn-toggle",{staticClass:"categoryList",attrs:{mandatory:"",tile:""},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[a("v-container",{staticClass:"pa-1"},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-col",{staticClass:"ma-0",attrs:{col:"12"}},t._l(t.categoryList,(function(e,r){return a("v-btn",{key:r,staticClass:"ma-1",attrs:{value:e.name},on:{click:function(e){t.openComputer=!0}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),a("v-divider"),a("v-text-field",{staticClass:"pa-5",attrs:{solo:"",dark:"",label:"備註",type:"text"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),a("v-bottom-sheet",{attrs:{persistent:""},model:{value:t.openComputer,callback:function(e){t.openComputer=e},expression:"openComputer"}},[a("Computer",{attrs:{price:t.price},on:{price:t.updatePirce,close:function(e){t.openComputer=!1}}})],1)],1)},pt=[],mt=(a("4ec9"),a("ac1f"),a("3ca3"),a("5319"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Computer"}},[a("div",{staticClass:"computerSymbol"},[a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-division")])],1),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-window-close")])],1),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-minus")])],1),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-plus")])],1)],1),a("div",{staticClass:"computerNumber"},[t._l(9,(function(e){return a("v-btn",{key:e,staticClass:"ComputerBtn",attrs:{dark:"",tile:""},on:{click:function(a){return t.addNumber(e)}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-numeric-"+t._s(e))])],1)})),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""},on:{click:t.addDot}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-circle-small")])],1),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""},on:{click:function(e){return t.addNumber(0)}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-numeric-0")])],1),a("v-btn",{staticClass:"ComputerBtn",attrs:{dark:"",tile:""},on:{click:t.backspace}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-backspace-outline")])],1)],2),a("div",{staticClass:"ComputerBtnTop"},[a("v-btn",{staticClass:"ComputerBtn text-h4",attrs:{dark:"",tile:""},on:{click:t.AC}},[t._v(" AC ")])],1),a("div",{staticClass:"ComputerBtnBtm"},[t.calculationStatus?[a("v-btn",{staticClass:"ComputerBtn text-h4",attrs:{dark:"",tile:""}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-equal")])],1)]:[a("v-btn",{staticClass:"ComputerBtn text-h4",attrs:{dark:"",tile:""},on:{click:function(e){return t.$emit("close")}}},[t._v(" OK ")])]],2)])}),gt=[],ft={props:{price:{type:String,default:"0"}},data:function(){return{tempPrice:"",calculationStatus:null}},methods:{addNumber:function(t){var e=this.price;e+=String(t),/^\d{0,10}(\.?)\d{0,2}$/.test(e)&&(/^0\d/.test(e)&&(e=String(Number(e))),this.$emit("price",e))},backspace:function(){var t=this.price;t.length>1?(t=t.substring(0,t.length-1),this.$emit("price",t)):this.$emit("price","0")},addDot:function(){var t=this.price;/\./.test(t)||this.$emit("price",t+=".")},AC:function(){this.calculationStatus=null,this.$emit("price","0")}}},ht=ft,bt=(a("c2fb"),Object(w["a"])(ht,mt,gt,!1,null,null,null)),kt=bt.exports,xt={components:{Computer:kt},data:function(){return{price:"0",remark:"",carouselIndex:0,openComputer:!1,category:""}},computed:Object(ct["a"])(Object(ct["a"])({},Object(O["b"])("ledger",{date:function(t){return t.date},status:function(t){return t.status},db:function(t){return t.db},categoryList:function(t){return t.categoryList}})),{},{statusTitle:function(){var t=new Map([["expenditure","支出"],["income","收入"]]);return t.get(this.status)}}),created:function(){this.$store.dispatch("ledger/updateCategoryList")},methods:{updatePirce:function(t){this.price=t},addItem:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,i,c,o,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.date,r=t.price,n=t.category,s=t.remark,i=t.status,c=t.db,o=Number(r),!o){e.next=12;break}return u=t.$dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]"),l=u,d={date:a,price:o,category:n,remark:s,status:i,createTime:u,updateTime:l},e.next=8,c.add("expense",d);case 8:t.$store.dispatch("ledger/updateItemList"),t.price="0",t.remark="",t.$router.replace("/ledger");case 12:case"end":return e.stop()}}),e)})))()}}},_t=xt,yt=(a("d905"),Object(w["a"])(_t,vt,pt,!1,null,null,null)),Ct=yt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{app:"",id:"LedgerSetting"}},[a("v-app-bar",{attrs:{app:"",dark:"",flat:""}},[a("v-btn",{attrs:{icon:"",replace:"",to:"/ledger"}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-left")])],1),a("v-spacer"),a("span",{staticClass:"text-h5"},[t._v("設定")]),a("v-spacer")],1),a("v-list",{staticClass:"LedgerSettingList",attrs:{dark:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{replace:"",to:"/ledger/setting/category"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-tag")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("類別設定")])],1)],1),a("v-divider")],1)],1)],1)},$t=[],Dt=(a("127c"),{}),jt=Object(w["a"])(Dt,wt,$t,!1,null,null,null),Lt=jt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{id:"LedgerSettingCategory",app:""}},[a("v-app-bar",{attrs:{app:"",dark:"",flat:""}},[a("v-btn",{attrs:{icon:"",replace:"",to:"/ledger/setting"}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-left")])],1),a("v-spacer"),a("span",{staticClass:"text-h5"},[t._v("類別設定")]),a("v-spacer")],1),a("v-tabs",{attrs:{dark:"",grow:""},model:{value:t.statusIndex,callback:function(e){t.statusIndex=e},expression:"statusIndex"}},[a("v-tab",[t._v("支出")]),a("v-tab",[t._v("收入")])],1),a("div",{staticClass:"d-flex px-4 grey darken-4 align-center"},[a("v-text-field",{staticClass:"SettingCategoryInput",attrs:{dark:"","background-color":"grey darken-4",filled:"",height:"56px",label:"新增類別","hide-details":"",placeholder:"請輸入類別"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),a("v-btn",{staticClass:"blue-grey darken-4",attrs:{tile:"",dark:""},on:{click:t.addCategory}},[t._v(" 新增 ")])],1),a("v-divider"),a("v-list",{staticClass:"LedgerSettingCategoryList",attrs:{dark:""}},[t._l(t.thisCategoryList,(function(e,r){return[a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"pl-3"},[t._v(t._s(e.name))])],1),a("v-list-item-action",[a("v-btn",{staticClass:"red darken-4",attrs:{tile:""},on:{click:function(a){return t.deleteCategory(e.id)}}},[t._v(" 刪除 ")])],1)],1),a("v-divider",{key:r+"divider"})]}))],2),a("v-snackbar",{attrs:{"content-class":"d-flex",timeout:"3000",top:""},model:{value:t.categoryRepeat,callback:function(e){t.categoryRepeat=e},expression:"categoryRepeat"}},[a("v-spacer"),t._v(" 類別已重複 "),a("v-spacer"),a("v-icon",{attrs:{color:"red lighten-1"}},[t._v("mdi-alert")])],1)],1)},St=[],Rt={data:function(){return{statusIndex:0,category:"",categoryRepeat:!1}},computed:Object(ct["a"])(Object(ct["a"])({},Object(O["b"])("ledger",{db:function(t){return t.db},categoryList:function(t){return t.categoryList}})),{},{status:function(){return["expenditure","income"][this.statusIndex]},thisCategoryList:function(){var t=this.status;return this.categoryList.filter((function(e){return e.status===t}))}}),created:function(){this.$store.dispatch("ledger/updateCategoryList")},methods:{addCategory:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.db,r=t.category,n=t.status,s=t,i={name:r,status:n},!i.name){e.next=8;break}return e.next=6,a.add("category",i).catch((function(){s.categoryRepeat=!0}));case 6:t.category="",t.$store.dispatch("ledger/updateCategoryList");case 8:case"end":return e.stop()}}),e)})))()},deleteCategory:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.db,a.next=3,r.delete("category",t);case 3:e.$store.dispatch("ledger/updateCategoryList");case 4:case"end":return a.stop()}}),a)})))()}}},Pt=Rt,Et=(a("5d75"),Object(w["a"])(Pt,Ot,St,!1,null,null,null)),Bt=Et.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{app:""}},[a("v-app-bar",{attrs:{dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.$router.push("/")}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-left")])],1),a("v-toolbar-title",[t._v(t._s(t.friend))])],1),a("div",{staticClass:"content"},[a("div",{attrs:{id:"text_area"}},t._l(t.message,(function(e){return a("div",{key:e.time,staticClass:"msg",class:{user:t.account===e.user}},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatarImg,alt:""}})]),a("div",{staticClass:"text"},[t._v(t._s(e.text))])])})),0),a("form",{staticClass:"input",on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{type:"text",placeholder:"輸入訊息"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),a("button",{staticClass:"btn",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}}},[t._v("送出")])])])],1)},At=[],It={data:function(){return{message:[],msg:null,friend:null,avatarImg:N.a}},computed:{account:function(){return this.$store.state.account}},mounted:function(){var t=this,e=this,a=this.$store.getters.getFriendName,r=this.$route.params.id,n=this.axios;e.friend=a(r),this.$socket.emit("bind room",r),this.sockets.subscribe("chat message",(function(e){t.message.push(e)})),n.get("/getMsg",{params:{account:r}}).then((function(t){e.message=t.data}))},methods:{send:function(){this.msg&&(this.$socket.emit("chat message",this.msg),this.msg=null)}},updated:function(){var t=document.getElementById("text_area");t.scrollTop=t.scrollHeight-t.offsetHeight}},Nt=It,qt=(a("23e1"),Object(w["a"])(Nt,Mt,At,!1,null,"e06a5f32",null)),Ft=qt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("form",{staticClass:"login",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[t._m(0),a("div",{staticClass:"row",class:{loginErr:t.loginErr}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",placeholder:"輸入帳號"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"row",class:{loginErr:t.loginErr}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"row"},[a("router-link",{staticClass:"btn",attrs:{to:"/register"}},[t._v(" 註冊 ")]),a("button",{staticClass:"btn",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}}},[t.loading?[a("svg",{staticStyle:{"enable-background":"new 0 0 50 50"},attrs:{version:"1.1",id:"loader",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"30px",height:"30px",viewBox:"0 0 50 50","xml:space":"preserve"}},[a("path",{attrs:{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,\n                  18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"}},[a("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})],1)])]:t._e(),t.loading?t._e():[t._v(" 登入 ")]],2)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loginErr,expression:"loginErr"}],staticClass:"err"},[t._v("登入失敗請輸入正確帳號密碼")])]),t._m(1)])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h2",[t._v("Login")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right"},[a("h1",[t._v("HaTalk")]),a("span",[t._v("Copyright © 2021 Viaje9 Design.")])])}],Ut={data:function(){return{account:null,password:null,loginErr:!1,loading:!1}},methods:{login:function(){var t=this,e=this.axios,a=this.$store,r=this.$router,n=this.account,s=this.password;this.loading=!0,e.post("/Login",{account:n,password:s}).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.data.success){e.next=8;break}return e.next=3,a.dispatch("getUser");case 3:t.$socket.close(),t.$socket.open(),r.push("/"),e.next=9;break;case 8:t.loginErr=!0;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))}}},Ht=Ut,zt=(a("d2d3"),Object(w["a"])(Ht,Tt,Yt,!1,null,"745398ba",null)),Vt=zt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.checkForm(e)}}},[t._m(0),a("div",{staticClass:"row",class:{registerErr:t.errorRegister}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",name:"name",type:"text",minlength:"1",maxlength:"10",required:"",placeholder:"輸入暱稱"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"row",class:{registerErr:t.errorAccount||t.errorRegister}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{id:"account",name:"account",type:"text",minlength:"4",maxlength:"20",required:"",placeholder:"輸入帳號"},domProps:{value:t.account},on:{change:t.checkAccount,input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"row",class:{registerErr:t.errorPassword||t.errorRegister}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",minlength:"8",maxlength:"20",required:"",placeholder:"輸入密碼"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"row",class:{registerErr:t.errorPassword||t.errorRegister}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],attrs:{id:"checkPassword",name:"checkPassword",type:"password",required:"",placeholder:"確認密碼"},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})]),a("div",{staticClass:"row"},[a("router-link",{staticClass:"btn",attrs:{to:"/login"}},[t._v("取消")]),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("註冊")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errorAccount||t.errorPassword||t.errorRegister,expression:"errorAccount || errorPassword || errorRegister"}],staticClass:"err"},[t._v(" "+t._s(t.errorAccount||t.errorPassword||t.errorRegister)+" ")])]),t._m(1)])])},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h2",[t._v("Registered")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right"},[a("h1",[t._v("HaTalk")]),a("span",[t._v("Copyright © 2020 Viaje9 Design.")])])}],Zt={data:function(){return{name:null,account:null,password:null,checkPassword:null,errorAccount:null,errorPassword:null,errorRegister:null}},methods:{checkAccount:function(){var t=this;this.axios.get("/CheckAccount",{params:{account:this.account}}).then((function(e){t.errorAccount=e.data?null:"帳號重複請重新輸入"}))},checkForm:function(){var t=this;this.password===this.checkPassword&&null===this.errorAccount?this.axios.post("/Register",{name:this.name,account:this.account,password:this.password}).then((function(e){e.data.success?t.$router.push("/"):t.errorRegister="註冊失敗"})):this.errorPassword="密碼不一致請重新輸入"}}},Gt=Zt,Kt=(a("8b65"),Object(w["a"])(Gt,Jt,Wt,!1,null,"937845ca",null)),Qt=Kt.exports;r["default"].use(L["a"]);var Xt=[{path:"/",component:nt,meta:{requiresAuth:!0}},{path:"/login",component:Vt},{path:"/register",component:Qt},{path:"/ledger",component:dt,meta:{requiresAuth:!0}},{path:"/ledger/create",component:Ct,meta:{requiresAuth:!0}},{path:"/ledger/setting",component:Lt,meta:{requiresAuth:!0}},{path:"/ledger/setting/category",component:Bt,meta:{requiresAuth:!0}},{path:"/chat/:id",component:Ft,meta:{requiresAuth:!0,DisableBottomMenu:!0}}],te=new L["a"]({base:"/",routes:Xt});te.beforeEach(function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(e,a,r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.matched.some((function(t){return t.meta.requiresAuth})),a.matched.length){t.next=4;break}return t.next=4,P.dispatch("getUser");case 4:s=P.state.auth,n?s?r():r({path:"/login"}):r();case 6:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}());var ee=te;a("f5df1");r["default"].component("menu-component",Y),r["default"].use(s.a,g),r["default"].use(new c.a({connection:"https://viaje9.com/"})),r["default"].config.productionTip=!1,new r["default"]({router:ee,store:P,vuetify:d,dayjs:k,render:function(t){return t(D)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"5d75":function(t,e,a){"use strict";a("e53b")},6311:function(t,e,a){},"8b65":function(t,e,a){"use strict";a("9d16")},"9c0c":function(t,e,a){},"9d16":function(t,e,a){},a3db:function(t,e,a){"use strict";a("ae38")},a692:function(t,e,a){t.exports=a.p+"img/avatar.8209f285.svg"},aa8c:function(t,e,a){},ae38:function(t,e,a){},b53a:function(t,e,a){},c2fb:function(t,e,a){"use strict";a("6311")},d038:function(t,e,a){},d2d3:function(t,e,a){"use strict";a("0e49")},d905:function(t,e,a){"use strict";a("b53a")},e53b:function(t,e,a){}});
//# sourceMappingURL=app.7bd0a432.js.map